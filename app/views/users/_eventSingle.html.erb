<div class="panel panel-default">
  <div class="panel-heading">
    <p>
      Name: <%= event.name %>
    </p>
  </div>
  <div class="panel-body">
    <p>
      Location: <%= event.location %>
    </p>
    <p>
      Start Time: <%= event.start_time %>
    </p>
    <p>
      End Time: <%= event.end_time %>
    </p>
    <p>
      Description: <%= truncate(strip_tags(event.description), length: 120) %>
    </p>
    <p>
      <%= link_to 'Show', event %>
    </p>
    <p>
      Comment stuff goes here!
    </p>
    
    <% if !isAttending(current_user.id, event.id) %>
      <%= button_to 'Attend', { controller: 'events', action: 'attendEvent', id: event.id } %>
    <% else %>
      <%= button_to 'Leave', { controller: 'events', action: 'leaveEvent', id: event.id } %>
    <% end %>
    
    <div class="panel-body">
      <%= getComments(event.id) .each do |c| %>
        <div class="row">
          <div class="col">
            <p>
              User: <%= c.user_id %>
            </p>
            <p>
              Text: <%= c.message %>
            </p>
            <p>
              Date: <%= c.created_at %>
            </p>
          </div>
        </div>
      <% end %>
      <%= form_for Comment.new, url: { action: 'new' }, remote: true do |f| %>
        <%= f.text_area :message %>
        <%= hidden_field_tag(:event_id, event.id) %>
        <%= hidden_field_tag(:user_id, current_user.id) %>
        <%= f.submit 'Reply' %>
      <% end %>
    </div>
  </div>
</div>